{% extends 'base.html' %}
{% load static %}

{% block style %}
<style>
  .button1 {
    display: inline-block;
    padding: -1.35em 1.2em;
    border: 0.1em solid;

    margin: 5px;
    border-radius: 0.12em;
    box-sizing: border-box;
    text-decoration: none;
    font-family: 'Roboto', sans-serif;
    font-weight: 300;
    color: #2264c3;
    text-align: center;
    transition: all 0.2s;
  }

  .button1:hover {
    color: white;
    background: skyblue;

  }

  @media all and (max-width:640em) {
    .button1 {
      display: block;
      margin: 0.4em auto;
    }



  }
</style>

<link rel="stylesheet" type="text/css" href="{% static 'sass/table.scss' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/table.css' %}">
{% endblock %}

{% block content %}
<div class="modal" id="new_script" role="dialog" style="display: none;" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="background:#222e3c">
      <div class="modal-header">
        <h4 class="modal-title text-white" id="myModalLabel">New Script</h4>
        <button type="button" class="close text-white" data-dismiss="modal">
          <span aria-hidden="true">Ã—</span>
          <span class="sr-only">Close</span>
        </button>
      </div>
      <form method="POST" action="save_project">
        {% csrf_token %}
        <div class="modal-body" style="background:#f7f7fc">
          <div class="mb-3">
            <label class="form-label" for="rpoject_id">Project:</label>
            <select class="form-select" id="project_id" name="poject_id">
              {% for project in projects %}
              select=""
              {% if project.id == project_id %}
              select="selected"
              {% endif %}
              <option value="{{project.id}}" {{select}} >{{project.project_name}}</option>
              {% endfor %}
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label" for="device_id">Device:</label>
            <select class="form-select" id="device_id" name="device_id">
              {% for device in devices %}
              <option value="{{device.id}}">{{device}}</option>
              {% endfor %}
            </select>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Script Name</label>
            <input class="form-control" name="script_name" required>
          </div>

        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-default text-white" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary submitBtn">Configure</button>
        </div>
      </form>
    </div>
  </div>
</div>
<div class="container-fluid p-0">
  <div class="row mb-2 mb-xl-3">
    <div class="col-auto d-none d-sm-block">

      <h3><strong>{{project.project_name}}</strong> &#8594; Scripts</h3>
    </div>
  </div>
  <div style="overflow-x:auto;">
    <table style="border: opx solid transparent;" class="responsive-card-table unstriped">
      <thead>
        <tr>
          <th>Type</th>
          <th>Name</th>
          <th>Device</th>
          <th>Date Modified</th>
          <th>Date Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for script in scripts %}
        <tr>
          <td data-label="Type"><span class="badge bg-success">{% if script.device_id == 1 %} Router {% endif %}</span>
          </td>
          <td data-label="Name">{{script.script_name}}</td>
          <td data-label="Devices">{{script.device.device_model}}</td>
          <td data-label="Dtae Modified">{{script.date_modified}}</td>
          <td data-label="Date Created">{{script.date_created}}</td>
          <td data-label="Actions">
            <div class='d-flex justify-content-between'>
              <form method='POST' action="edit_script">
                {% csrf_token %}
                <input type='hidden' name='script_id' value='{{script.id}}'>
                <button class="button1" type="=submit"><i data-feather="edit"></i> <span>Edit</span></button>
              </form>
              <form method='POST' action="generate_exe">
                {% csrf_token %}
                <input type='hidden' name='script_id' value='{{script.id}}'>
                <button class="button1" type="=submit"><i data-feather="download"></i> <span>Exe</span></button>
              </form>
              <form method='POST' action="generate_text">
                {% csrf_token %}
                <input type='hidden' name='script_id' value='{{script.id}}'>
                <button class="button1" type="=submit"><i data-feather="download"></i> <span>Text</span></button>
              </form>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="responsive-card-table">
        {% csrf_token %}
        <input type='hidden' name='project_id' value='{{project_id}}'>
        <button style="border: steelblue; background: steelblue; color: white;" data-toggle="modal" data-target="#new_script"><i
            data-feather="plus"></i> <span>New
            Script</span></button>
    </div>


  </div>
</div>



{% endblock %}

{% block script %}

{% endblock %}